function l(t){return t===null?"null":t!==Object(t)?typeof t:{}.toString.call(t).slice(8,-1).toLowerCase()}function E(t){return l(t)!=="string"?!0:!t.length}function x(t="",e,s){if(E(t))return!1;const n=t.charCodeAt(0);return e<=n&&n<=s}const b={HEPBURN:"hepburn"},B={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:b.HEPBURN},v=65345,H=65370,Z=65313,$=65338,Y=12353,C=12449,W=12540,G=12540,q=12539,V=[65296,65305],X=[Z,$],F=[v,H],Q=[65281,65295],tt=[65306,65311],et=[65339,65343],nt=[65371,65376],rt=[65504,65518],st=[12352,12447],it=[12448,12543],ct=[65382,65439],ft=[12539,12540],R=[65377,65381],ot=[12288,12351],at=[19968,40959],ut=[13312,19903],At=[st,it,R,ct],Ot=[ot,R,ft,Q,tt,et,nt,rt],lt=[...At,...Ot,X,F,V,at,ut];function Et(t=""){return lt.some(([e,s])=>x(t,e,s))}function Gt(t="",e){const s=l(e)==="regexp";return E(t)?!1:[...t].every(n=>{const r=Et(n);return s?r||e.test(n):r})}var _=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ht(t,e){return!!(t===e||_(t)&&_(e))}function Nt(t,e){if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(!ht(t[s],e[s]))return!1;return!0}function I(t,e){e===void 0&&(e=Nt);var s=null;function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(s&&s.lastThis===this&&e(r,s.lastArgs))return s.lastResult;var c=t.apply(this,r);return s={lastResult:c,lastArgs:r,lastThis:this},c}return n.clear=function(){s=null},n}var K=Object.prototype.hasOwnProperty;function p(t,e,s){for(s of t.keys())if(O(s,e))return s}function O(t,e){var s,n,r;if(t===e)return!0;if(t&&e&&(s=t.constructor)===e.constructor){if(s===Date)return t.getTime()===e.getTime();if(s===RegExp)return t.toString()===e.toString();if(s===Array){if((n=t.length)===e.length)for(;n--&&O(t[n],e[n]););return n===-1}if(s===Set){if(t.size!==e.size)return!1;for(n of t)if(r=n,r&&typeof r=="object"&&(r=p(e,r),!r)||!e.has(r))return!1;return!0}if(s===Map){if(t.size!==e.size)return!1;for(n of t)if(r=n[0],r&&typeof r=="object"&&(r=p(e,r),!r)||!O(n[1],e.get(r)))return!1;return!0}if(s===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(s===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return n===-1}if(!s||typeof t=="object"){n=0;for(s in t)if(K.call(t,s)&&++n&&!K.call(e,s)||!(s in e)||!O(t[s],e[s]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}const St=(t={})=>Object.assign({},B,t);function jt(t,e,s){const n=e;function r(f,o){if(f[o]!==void 0)return Object.assign({"":f[""]+o},f[o])}function i(f,o){const a=f.charAt(0);return c(Object.assign({"":a},n[a]),f.slice(1),o,o+1)}function c(f,o,a,u){if(!o)return s||Object.keys(f).length===1?f[""]?[[a,u,f[""]]]:[]:[[a,u,null]];if(Object.keys(f).length===1)return[[a,u,f[""]]].concat(i(o,u));const A=r(f,o.charAt(0));return A===void 0?[[a,u,f[""]]].concat(i(o,u)):c(A,o.slice(1),a,u+1)}return i(t,0)}function g(t){return Object.entries(t).reduce((e,[s,n])=>{const r=l(n)==="string";return e[s]=r?{"":n}:g(n),e},{})}function M(t,e){return e.split("").reduce((s,n)=>(s[n]===void 0&&(s[n]={}),s[n]),t)}function w(t={}){const e={};return l(t)==="object"&&Object.entries(t).forEach(([s,n])=>{let r=e;s.split("").forEach(i=>{r[i]===void 0&&(r[i]={}),r=r[i]}),r[""]=n}),function(n){const r=JSON.parse(JSON.stringify(n));function i(c,f){return c===void 0||l(c)==="string"?f:Object.entries(f).reduce((o,[a,u])=>(o[a]=i(c[a],u),o),c)}return i(r,e)}}function m(t,e){return e?l(e)==="function"?e(t):w(e)(t):t}const gt={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},yt={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},U={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},P={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},z={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},d={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},Tt=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},z,P),_t={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},Kt={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function pt(){const t=g(gt),e=r=>M(t,r);Object.entries(U).forEach(([r,i])=>{Object.entries(P).forEach(([c,f])=>{e(r+c)[""]=i+f})}),Object.entries(yt).forEach(([r,i])=>{e(r)[""]=i}),Object.entries(Kt).forEach(([r,i])=>{Object.entries(z).forEach(([c,f])=>{const o=e(r+c);o[""]=i+f})}),["n","n'","xn"].forEach(r=>{e(r)[""]="ん"}),t.c=JSON.parse(JSON.stringify(t.k)),Object.entries(d).forEach(([r,i])=>{const c=r.slice(0,r.length-1),f=r.charAt(r.length-1),o=e(c);o[f]=JSON.parse(JSON.stringify(e(i)))});function s(r){return[...Object.entries(d),["c","k"]].reduce((i,[c,f])=>r.startsWith(f)?i.concat(r.replace(f,c)):i,[])}Object.entries(Tt).forEach(([r,i])=>{const c=A=>A.charAt(A.length-1),f=A=>A.slice(0,A.length-1),o=`x${r}`,a=e(o);a[""]=i;const u=e(`l${f(r)}`);u[c(r)]=a,s(r).forEach(A=>{["l","x"].forEach(T=>{const D=e(T+f(A));D[c(A)]=e(T+r)})})}),Object.entries(_t).forEach(([r,i])=>{e(r)[""]=i});function n(r){return Object.entries(r).reduce((i,[c,f])=>(c?i[c]=n(f):i[c]=`っ${f}`,i),{})}return[...Object.keys(U),"c","y","w","j"].forEach(r=>{const i=t[r];i[r]=n(i)}),delete t.n.n,Object.freeze(JSON.parse(JSON.stringify(t)))}let h=null;function Ut(){return h==null&&(h=pt()),h}const dt=w({wi:"ゐ",we:"ゑ"});function Lt(t){const e=JSON.parse(JSON.stringify(t));return e.n.n={"":"ん"},e.n[" "]={"":"ん"},e}function y(t=""){return E(t)?!1:t.charCodeAt(0)===G}function xt(t=""){return E(t)?!1:t.charCodeAt(0)===q}I((t,e,s)=>{let n=Ut();return n=t?Lt(n):n,n=e?dt(n):n,s&&(n=m(n,s)),n},O);function j(t=""){return x(t,C,W)}function bt(t=""){return E(t)?!1:[...t].every(j)}const Ct=(t,e)=>y(t)&&e<1,Rt=(t,e)=>y(t)&&e>0,It=t=>["ヶ","ヵ"].includes(t),Mt={a:"あ",i:"い",u:"う",e:"え",o:"う"};function wt(t="",e,{isDestinationRomaji:s,convertLongVowelMark:n}={}){let r="";return t.split("").reduce((i,c,f)=>{if(xt(c)||Ct(c,f)||It(c))return i.concat(c);if(n&&r&&Rt(c,f)){const o=e(r).slice(-1);return j(t[f-1])&&o==="o"&&s?i.concat("お"):i.concat(Mt[o])}if(!y(c)&&j(c)){const o=c.charCodeAt(0)+(Y-C),a=String.fromCharCode(o);return r=a,i.concat(a)}return r="",i.concat(c)},[]).join("")}let N=null;const mt={あ:"a",い:"i",う:"u",え:"e",お:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",さ:"sa",し:"shi",す:"su",せ:"se",そ:"so",た:"ta",ち:"chi",つ:"tsu",て:"te",と:"to",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",は:"ha",ひ:"hi",ふ:"fu",へ:"he",ほ:"ho",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",や:"ya",ゆ:"yu",よ:"yo",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ざ:"za",じ:"ji",ず:"zu",ぜ:"ze",ぞ:"zo",だ:"da",ぢ:"ji",づ:"zu",で:"de",ど:"do",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",ゔぁ:"va",ゔぃ:"vi",ゔ:"vu",ゔぇ:"ve",ゔぉ:"vo"},Pt={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~",ー:"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},zt=["あ","い","う","え","お","や","ゆ","よ"],S={ゃ:"ya",ゅ:"yu",ょ:"yo"},Jt={ぃ:"yi",ぇ:"ye"},kt={ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},Dt=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],Bt={し:"sh",ち:"ch",じ:"j",ぢ:"j"},vt={っ:"",ゃ:"ya",ゅ:"yu",ょ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},L={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function Ht(){return N==null&&(N=$t()),N}function Zt(t){switch(t){case b.HEPBURN:return Ht();default:return{}}}function $t(){const t=g(mt),e=n=>M(t,n),s=(n,r)=>{e(n)[""]=r};return Object.entries(Pt).forEach(([n,r])=>{e(n)[""]=r}),[...Object.entries(S),...Object.entries(kt)].forEach(([n,r])=>{s(n,r)}),Dt.forEach(n=>{const r=e(n)[""][0];Object.entries(S).forEach(([i,c])=>{s(n+i,r+c)}),Object.entries(Jt).forEach(([i,c])=>{s(n+i,r+c)})}),Object.entries(Bt).forEach(([n,r])=>{Object.entries(S).forEach(([i,c])=>{s(n+i,r+c[1])}),s(`${n}ぃ`,`${r}yi`),s(`${n}ぇ`,`${r}e`)}),t.っ=J(t),Object.entries(vt).forEach(([n,r])=>{s(n,r)}),zt.forEach(n=>{s(`ん${n}`,`n'${e(n)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(t)))}function J(t){return Object.entries(t).reduce((e,[s,n])=>{if(s)e[s]=J(n);else{const r=n.charAt(0);e[s]=Object.keys(L).includes(r)?L[r]+n:n}return e},{})}const k=I((t,e)=>{let s=Zt(t);return e&&(s=m(s,e)),s},O);function Yt(t="",e={},s){const n=St(e);return s||(s=k(n.romanization,n.customRomajiMapping)),Wt(t,n,s).map(r=>{const[i,c,f]=r;return n.upcaseKatakana&&bt(t.slice(i,c))?f.toUpperCase():f}).join("")}function Wt(t,e,s){s||(s=k(e.romanization,e.customRomajiMapping));const n=Object.assign({},{isDestinationRomaji:!0},e);return jt(wt(t,Yt,n),s,!e.IMEMode)}export{Gt as i,Yt as t};
